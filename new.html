<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="assets/css/oe-eyedraw.css" type="text/css" media="screen" />
    <style type="text/css">
    aside {
    line-height:20px;
    background-color:#eeeeee;
    height:600px;
    width:790px;
    float:right;
    padding:1px;          
}
    section {
    position: relative;
    bottom: 26px;
    width:290px;
    float:left;
    padding:1px;        
}
    button {
    font-size: 55%;

}
    #diag-title {
position: relative;
bottom: -535px;
left: -290px;

}
</style>
    <script src="assets/js/dist/eyedraw.js" type="text/javascript"></script>
   
    <script type="text/javascript">
            var saveInput = document.getElementById('saveInput');
            var drawingEdit
            function init(){
            drawingEdit = new ED.Drawing(document.getElementById('canvasEdit'), ED.eye.Left, 'LPS', true, {graphicsPath:'assets/img/'});
            var controller = new eyeDrawController(drawingEdit);
                drawingEdit.init();
            setTimeout("defaultCanvasJSON()",500);
            }
            function defaultCanvasJSON(){undoStack.push(drawingEdit.save());}
            function eyeDrawController(_drawing){
                this.callBack = callBack;

                _drawing.registerForNotifications(this, 'callBack', ['ready']);
                _drawing.showDoodleControls = false;
                function callBack(_messageArray){
                    switch (_messageArray['eventName']){
                        case 'ready':
                            _drawing.addDoodle('Fundus');
                            
                       _drawing.addBindings({ActiveVasculitisNasal:{}});
                            _drawing.addBindings({SnailTrackDegeneration:{}});
                          
                           _drawing.deselectDoodles();
                            break;
            }
            }
            }
            

    </script>
<script type="text/javascript">
    //Script to print out Diagnosis Description of all doodles on the canvas 
    function print()
    {
        var saveInput = document.getElementById('saveInput');
        saveInput.innerHTML = "";
    
        for(var i=1;i<drawingEdit.doodleArray.length;i++){
            if (i>1) {
            
                if (drawingEdit.doodleArray[i-1].className!=drawingEdit.doodleArray[i].className ){
                    saveInput.innerHTML+=drawingEdit.doodleArray[i].groupDescription();
                    saveInput.innerHTML+=drawingEdit.doodleArray[i].description();
                    saveInput.innerHTML+=drawingEdit.doodleArray[i].groupDescriptionEnd();
                    if (drawingEdit.doodleArray.length -1 != i && drawingEdit.doodleArray.length > 2) {
                        saveInput.innerHTML+=", ";
                    };
                }
                else if(drawingEdit.doodleArray[i-1].className==drawingEdit.doodleArray[i].className && drawingEdit.doodleArray[i].description().search("clock")!= -1){
                    saveInput.innerHTML+=drawingEdit.doodleArray[i].description();
                    saveInput.innerHTML+=drawingEdit.doodleArray[i].groupDescriptionEnd();
                    if (drawingEdit.doodleArray.length -1 != i && drawingEdit.doodleArray.length > 2) {
                        saveInput.innerHTML+=", ";
                    };   
                }
            
            }
            else{
                saveInput.innerHTML+=drawingEdit.doodleArray[i].groupDescription();
                saveInput.innerHTML+=drawingEdit.doodleArray[i].description();
                saveInput.innerHTML+=drawingEdit.doodleArray[i].groupDescriptionEnd();
                if (drawingEdit.doodleArray.length -1 != i && drawingEdit.doodleArray.length > 2) {
                    saveInput.innerHTML+=", ";
                };
            }   
       }
    }
</script>

</head>

<body onload="init();">
<!--**Cortical Cataract Membrane button**

<button class="imgbutton" onclick="drawingEdit.addDoodle('CorticalCataract'); return false;" ><img src="assets/img/old/CorticalCataract.gif" /></button>
-->

<section>

<h1><u>Retina Tool (OS)</u></h1>

<canvas id="canvasEdit" class="ed-canvas-edit" width="520" height="520" style="poistion:relative; margin-left: auto; margin-right: auto;"></canvas>

</section>
</body>
